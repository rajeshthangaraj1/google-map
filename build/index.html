<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"><title>Map</title><link rel="shortcut icon" href="/images/favicon.png"><link rel="stylesheet" href="/css/style.css"/><link href="/static/css/main.cd73579c.css" rel="stylesheet"></head><body><div id="root" class="home_pg"></div><script src="https://code.jquery.com/jquery-3.3.1.js"></script><script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?language=en&key=AIzaSyA-AB-9XZd-iQby-bNLYPFyb0pR2Qw3orw"></script><script>function initMap(){var e,n="http://maps.google.com/mapfiles/ms/icons/red-dot.png",t=[["6","24.865606","49.751587","asdf","kumar","1"]],o=new google.maps.Map(document.getElementById("maps"),{zoom:7,center:new google.maps.LatLng(26.076521,52.624512),mapTypeId:"roadmap"});locate(o,t);var a,r=(google.maps.event.addListener(o,"click",function(e){console.log("new-lock3");var n=e.latLng.lat(),t=e.latLng.lng(),a=getMarkerUniqueId(n,t),r=new google.maps.Marker({position:getLatLng(n,t),map:o,animation:google.maps.Animation.DROP,id:"marker_"+a,html:"    <div id='info_"+a+"'>\n        <table class=\"map1\">\n            <tr>\n                <td><a>User name:</a></td>\n                <td><input  id='username' class='username required' placeholder='Username'></input></td></tr>\n            <tr>\n                <td><a>Description:</a></td>\n                <td><textarea  id='manual_description' class='manual_description required' placeholder='Description'></textarea></td></tr>\n            <tr><td></td><td><input type='button' value='Save' onclick='saveData("+n+","+t+")'/></td></tr>\n        </table>\n    </div>"});markers[a]=r,bindMarkerEvents(r),bindMarkerinfo(r)}),0);for(a=0;a<t.length;a++)marker=new google.maps.Marker({position:new google.maps.LatLng(t[a][1],t[a][2]),map:o,icon:"1"===t[a][4]?n:purple_icon,html:"<div>\n<table class=\"map1\">\n<tr>\n<td><a>Description:</a></td>\n<td><textarea disabled id='manual_description' placeholder='Description'>"+t[a][3]+"</textarea></td></tr>\n</table>\n</div>"}),google.maps.event.addListener(marker,"click",function(n,a){return function(){e=new google.maps.InfoWindow,r="1"===t[a][4]?"checked":0,$("#confirmed").prop(r,t[a][4]),$("#id").val(t[a][0]),$("#description").val(t[a][3]),$("#form").show(),e.setContent(n.html),e.open(o,n)}}(marker,a))}function saveData(e,n){var t=document.getElementById("manual_description").value,o=document.getElementById("username").value;if(""==o)return alert("pls enter the username"),!1;if(""==t)return alert("pls type the description"),!1;var a="locations_model.php?add_location&description="+t+"&lat="+e+"&lng="+n+"&username="+o;downloadUrl(a,function(t,o,a){if(200===o&&t.length>1){var r=getMarkerUniqueId(e,n),i=markers[r];i.setIcon(purple_icon),infowindow.close(),infowindow.open(a,i),location.reload()}else console.log(o),console.log(t),infowindow.setContent("<div style='color: red; font-size: 25px;'>Inserting Errors</div>")})}function downloadUrl(e,n){var t=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&n(t.responseText,t.status)},t.open("GET",e,!0),t.send(null)}function locate(e,n){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(t){function o(e){for(var n=0,t=i.length;n<t;n++){var o=e[0].toString(),a=e[1].toString(),r=o.substring(0,6),l=a.substring(0,6);if(i[n][0].substring(0,6)==r&&i[n][1].substring(0,6)==l)return!1}return!0}for(var a=t.coords.latitude,r=t.coords.longitude,i=[],l=0,s=n.length;l<s;l++){var d=n[l][1],c=n[l][2];i.push([d,c])}var g=[a,r];console.log(g);var p=o(g);if(0!=p){var m="Current location",u=new google.maps.InfoWindow({map:e,content:m}),v={lat:a,lng:r};u.setPosition(v);var f=new google.maps.LatLng(a,r);marking=new google.maps.Marker({position:f,map:e});var k=google.maps.event.addListener(marking,"click",function(n){var t=n.latLng.lat(),o=n.latLng.lng(),a=getMarkerUniqueId(t,o),r=new google.maps.Marker({position:getLatLng(t,o),map:e,animation:google.maps.Animation.DROP,id:"marker_"+a,html:"    <div id='info_"+a+"'>\n        <table class=\"map1\">\n            <tr>\n                <td><a>User name:</a></td>\n                <td><input  id='username' class='username required' placeholder='Username'></input></td></tr>\n            <tr>\n                <td><a>Description:</a></td>\n                <td><textarea  id='manual_description' class='manual_description required' placeholder='Description'></textarea></td></tr>\n            <tr><td></td><td><input type='button' value='Save' onclick='saveData("+t+","+o+")'/></td></tr>\n        </table>\n    </div>"});markers[a]=r,bindMarkerEvents(r),bindMarkerinfo(r)})}google.maps.event.trigger(k,"click")})}$(document).ready(function(){$("#btnAction").on("click",function(){setTimeout(function(){$("#maps").css("position",""),$("#maps").css("overflow","")},1e3)}),$("#btnAction").trigger("click")});var markers={},getLatLng=function(e,n){return new google.maps.LatLng(e,n)},getMarkerUniqueId=function(e,n){return e+"_"+n},purple_icon="http://maps.google.com/mapfiles/ms/icons/purple-dot.png",bindMarkerinfo=function(e,n){google.maps.event.addListener(e,"click",function(e){console.log("new-lock1");var t=getMarkerUniqueId(e.latLng.lat(),e.latLng.lng()),o=markers[t];infowindow=new google.maps.InfoWindow,infowindow.setContent(o.html),infowindow.open(n,o)})},bindMarkerEvents=function(e,n){google.maps.event.addListener(e,"rightclick",function(e){console.log("new-lock");var n=getMarkerUniqueId(e.latLng.lat(),e.latLng.lng()),t=markers[n];removeMarker(t,n)})},removeMarker=function(e,n){e.setMap(null),delete markers[n]};google.maps.event.addDomListener(window,"load",initMap)</script><script type="text/javascript" src="/static/js/main.b9524282.js"></script></body></html>